Grid.presetDimensions = {
  glidergun: [50, 30]
};
Grid.presets = {
  "49p88105": ["","",".....................*..","...................***..","..................*..","..................**..","..**...................**..","...*...................*..","...*.*...............*.*..","....**...............**..","................*..","...............*.*..","..............**.**..","","","","","","","........**...............**..",".......*.*...............*.*..",".......*...................*..","......**...................**..","...........**..","............*..",".........***..",".........*..","",""],
  quasar105: ["","","............***...***..","","..........*....*.*....*..","..........*....*.*....*..","..........*....*.*....*..","............***...***..","","..........***.......***..","....***..*....*...*....*..***..",".........*....*...*....*..","..*....*.*....*...*....*.*....*..","..*....*.................*....*..","..*....*..***.......***..*....*..","....***...................***..","","....***...................***..","..*....*..***.......***..*....*..","..*....*.................*....*..","..*....*.*....*...*....*.*....*..",".........*....*...*....*..","....***..*....*...*....*..***..","..........***.......***..","","............***...***..","..........*....*.*....*..","..........*....*.*....*..","..........*....*.*....*..","","............***...***..","",""],
  "48p31105": ["","","","","","",".........**.*..*.**..","..**....*..*....*..*....**..","..**.....*.*....*.*.....**..","..........*......*..","","","","","","..........*......*..","..**.....*.*....*.*.....**..","..**....*..*....*..*....**..",".........**.*..*.**..","","","","","",""],
  p156hansleohassler105: ["","",".................**....**....**..","................*..*.*....*.*..*..","................***..........***..","...................**......**..","..................*..******..*..","..................**........**..","","...............*..","..........****...*...........*..",".............*...*....*....*...****..",".................*...***...*...*..","..............*............*..","...............**.............*..","............................**..","","................................**..","................................*..","..............................*.*..","..............................**..","...............***..","...............*.*..",".....**........***..","....*.*..","....*..","...**..","",".......**..","......*.......*.....**..",".........*...***......*..",".....*...*..*****..*..","..****...*..*****..*...*..",".......*......*....*...****..",".....................*..","............**..",".......**.*....*.**..",".......*..........*..","........**......**..",".....***..******..***..",".....*..*........*..*..","......**..........**..","",""],
  queenbeeshuttle105: ["","","...........*..",".........*.*..","........*.*..","..**...*..*...........**..","..**....*.*...........**..",".........*.*..","...........*..","",""],
  twinbeesshuttle105: ["","","...................**..","..**...............*.*.......**..","..**.................*.......**..","...................***..","","","","...................***..","..**.................*..","..**...............*.*..","...................**..","",""],
  turningtoads: ["","",".................*......*..","................**.....**......**..","........***.*.*.**.*.*.**.*.*..","....**.*......*.*....*.*....*.*..*.**..","..*..*.*...*..................****.*..*..","..**.*.*...........................*.**..",".....*.............................*..",".....**...........................**..","",""],
  achimsp8: ["","","...**..","..*..","...*...*..","...*...**..",".....*.*..","....**...*..",".....*...*..","..........*..","........**..","",""],
  pipsquirter1105: ["","",".....",".....",".....",".....",".....",".....**.**..","...***.*.***..","..*....*....*..","..*.**..**.*.*..","...*..**...*.*..","....**..**.*.*.**..","......*....*.*.**..","......****.**..","..........*..","........*.*..","........**..","",""],
  achimsp144105: ["","","..**........................**..","..**........................**..","....................**..","...................*..*..","....................**..","................*..","...............*.*..","..............*...*..","..............*..*..","","..............*..*..",".............*...*..","..............*.*..","...............*..","..........**..",".........*..*..","..........**..","..**........................**..","..**........................**..","",""],
  glidergun: ["                                                  ",
              "                                                  ",
              "                          *                       ",
              "                        * *                       ",
              "              **      **            **            ",
              "             *   *    **            **            ",
              "  **        *     *   **                          ",
              "  **        *   * **    * *                       ",
              "            *     *       *                       ",
              "             *   *                                ",
              "              **                                  ",
              "                                                  ",
              "                                                  ",
              "                                                  ",
              "                                                  ",
              "                                                  ",
              "                                                  ",
              "                                                  ",
              "                                                  ",
              "                                                  ",
              "                                                  ",
              "                                                  ",
              "                                                  ",
              "                                                  ",
              "                                                  ",
              "                                                  ",
              "                                                  ",
              "                                                  ",
              "                                                  ",
              "                                                  ",
              "                                                  ",
              "                                                  ",
              "                                                  ",
              "                                                  ",
              "                                                  ",
              "                                                  ",
              "                                                  ",
              "                                                  ",
              "                                                  ",
              "                                                  ",
              "                                                  ",
              "                                                  ",
              "                                                  ",
              "                                                  ",
              "                                                  "],
  quasar: ["                                                        ",
    "                                   ",
    "                                   ",
    "                                   ",
    "             ***   ***             ",
    "                                   ",
    "           *    * *    *           ",
    "           *    * *    *           ",
    "           *    * *    *           ",
    "             ***   ***             ",
    "                                   ",
    "           ***       ***           ",
    "     ***  *    *   *    *  ***     ",
    "          *    *   *    *          ",
    "   *    * *    *   *    * *    *   ",
    "   *    *                 *    *   ",
    "   *    *  ***       ***  *    *   ",
    "     ***                   ***     ",
    "                                   ",
    "     ***                   ***     ",
    "   *    *  ***       ***  *    *   ",
    "   *    *                 *    *   ",
    "   *    * *    *   *    * *    *   ",
    "          *    *   *    *          ",
    "     ***  *    *   *    *  ***     ",
    "           ***       ***           ",
    "                                   ",
    "             ***   ***             ",
    "           *    * *    *           ",
    "           *    * *    *           ",
    "           *    * *    *           ",
    "                                   ",
    "             ***   ***             ",
    "                                   ",
    "                                   ",
    "                                   ",
    "                                   "]
};

Grid.applyPreset = function(preset) {
  if (this.presetDimensions.hasOwnProperty(preset)) {
    var dimensions = this.presetDimensions[preset];
    this.setup(dimensions[0], dimensions[1], this.hiddenRegionSize, this.canvas);
  } else {
    var width = Math.max.apply(null, this.presets[preset].map(function(e) { return e.length; }));
    this.setup(width, this.presets[preset].length, this.hiddenRegionSize, this.canvas);
  }
  Grid.resetGrid();
  Grid.context.beginPath();
  for (var y = 0; y < this.height - this.hiddenRegionSize, y < this.presets[preset].length; ++y) {
    var row = this.presets[preset][y].split("");
    for (var x = 0; x < this.width - this.hiddenRegionSize; ++x) {
      if (row[x] === "*") {
        this.pixels[y + this.initialY][x + this.initialX] = true;
        Grid.putPixel(x, y);
      }
    }
  }
  Grid.context.closePath();
  Grid.context.fill();
};

Grid.printGrid = function() {
  var l = parseInt(this.hiddenRegionSize / 2);
  log("[\"" + this.pixels.slice(l, -l).map(function(e) {
    return e.slice(l, -l).map(function(d) {
      return d ? "*" : ".";
    }).join("").replace(/\.+$/, "");
  }).join("\",\"").replace(/,[^,]+$/, "]"));
};

Grid.createRandom = function(s) {
  Grid.resetGrid();
  Grid.context.beginPath();
  delete this.presets.random;
  Grid.presets.random = [];
  for (var y = 0; y < this.height; ++y) {
    var string = "";
    for (var x = 0; x < this.width; ++x) {
      if (Math.floor(Math.random() * s) === 0) {
        this.pixels[y][x] = true;
        string += "*";
        Grid.putPixel(x, y);
      } else {
        string += " ";
      }
    }
    this.presets.random.push(string);
  }
  log("[\"" + this.presets.random.join("\",\n \"") + "\"]");
  Grid.context.closePath();
  Grid.context.fill();
};

Grid.appendPresets = function() {
  var sel = document.getElementById("presets");
  for (var key in this.presets) {
    var opt = document.createElement("option");
    opt.value = key;
    opt.innerText = key;
    sel.appendChild(opt);
  }
};
